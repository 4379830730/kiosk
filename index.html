<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brantford Transit Kiosk</title>
    <style>
        /* --- 1. ÂÖ®Â±ÄÈÖçÁΩÆ --- */
        :root {
            --bg-blue: #1a3b8e;      
            --bg-beige: #fff9e6;    
            --text-dark: #0a1035;    
            --yellow: #fecb2f;       
            --btn-blue: #1f3b8e; 
            --tab-gray: #cfd4e4;
            --purple-end: #1a1a50;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            background-color: #222; 
            height: 100vh; 
            width: 100vw;
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            overflow: hidden; 
        }
        
        #app {
            width: 1024px; 
            height: 768px;
            background-color: var(--bg-blue);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            flex-shrink: 0; 
        }

        .hidden { display: none !important; }
        
        /* È°∂ÈÉ®ÈÄöÁü•Êù° - Â≠óÂè∑Âä†Â§ßÔºåÈ´òÂ∫¶Âä†È´ò */
        .top-banner { 
            background-color: var(--yellow); 
            color: #000; 
            text-align: center; 
            padding: 20px 0; /* Â¢ûÂä†‰∏ä‰∏ãÂÜÖËæπË∑ù */
            font-weight: 700; 
            font-size: 26px; /* Â≠óÂè∑Âä†Â§ß */
            width: 100%; 
            z-index: 10;
            line-height: 1.2;
        }

        /* --- Logo Âå∫Âüü --- */
        .header-section { text-align: center; color: white; position: relative; }
        
        /* Logo ÂõæÁâá - Â∞∫ÂØ∏Âä†Â§ß */
        .logo-img { 
            height: 110px; /* ‰ªé80pxÂä†Â§ßÂà∞110px */
            width: auto; 
            margin-bottom: 20px; 
        }
        
        .logo-text-backup { display: none; align-items: center; justify-content: center; gap: 10px; margin-bottom: 5px; }
        .logo-text-group { display: flex; flex-direction: column; align-items: flex-start; line-height: 1; }
        .logo-small { font-size: 20px; font-weight: 500; letter-spacing: 1px; }
        .logo-big { font-size: 40px; font-weight: 900; letter-spacing: 1px; }
        .logo-icon { font-size: 48px; }
        
        /* ÂâØÊ†áÈ¢ò - Â≠óÂè∑Âä†Â§ß */
        .subtitle { 
            margin-top: 20px; 
            font-size: 30px; /* ‰ªé20pxÂä†Â§ßÂà∞30px */
            font-weight: 500; 
            opacity: 1; 
        }

        /* ÊåâÈíÆÂü∫Á°Ä */
        .btn { border: none; cursor: pointer; transition: 0.1s; font-weight: 700; outline: none; }
        .btn:active { transform: scale(0.96); }

        /* =========================================
           PAGE 1: ËØ≠Ë®ÄÈ°µ (ÂÆåÂÖ®Â±Ö‰∏≠Â∏ÉÂ±Ä)
           ========================================= */
        #page-lang { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; /* ÂÖ≥ÈîÆÔºöÂûÇÁõ¥ÂÆåÂÖ®Â±Ö‰∏≠ */
            padding-bottom: 50px; /* Á®çÂæÆÂêë‰∏äÊèê‰∏ÄÁÇπÁÇπËßÜËßâÈáçÂøÉ */
        }
        
        .lang-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 240px); /* ÊåâÈíÆÂÆΩÂ∫¶Âä†Â§ß */
            gap: 40px; /* Èó¥Ë∑ùÂä†Â§ß */
            margin-top: 60px; /* ‰∏éÊñáÂ≠óÁöÑË∑ùÁ¶ªÂä†Â§ß */
        }
        
        .lang-btn { 
            height: 90px; /* ÊåâÈíÆÈ´òÂ∫¶Âä†Â§ß */
            background: white; 
            color: black; 
            font-size: 32px; /* Â≠ó‰ΩìÂä†Â§ß */
            font-weight: bold;
            border-radius: 12px; /* ÂúÜËßíÁ®çÂæÆÂ§ß‰∏ÄÁÇπ */
            border: 3px solid transparent; 
        }
        
        .lang-btn.active, .lang-btn:hover { 
            background-color: var(--yellow); 
            border-color: white; /* ÈÄâ‰∏≠Êó∂Âä†‰∏™ÁôΩËæπÊõ¥ÊúâË¥®ÊÑü */
            transform: scale(1.02); 
        }

        /* =========================================
           PAGE 2: Search (‰øùÊåÅÂéüÊúâÊ†∑Âºè)
           ========================================= */
        #page-search { flex:1; display:flex; flex-direction:column; align-items:center; position: relative; }
        .top-right-lang-btn { position: absolute; top: 20px; right: 30px; background: white; color: black; padding: 8px 20px; border-radius: 6px; font-weight: bold; font-size: 14px; }
        .search-bar-wrapper { width: 800px; background: #f0f0f0; border-radius: 12px; padding: 10px 20px; display: flex; align-items: center; margin-top: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .search-icon { font-size: 24px; color: #666; margin-right: 15px; }
        .mic-icon { font-size: 24px; color: #666; margin-left: 15px; cursor: pointer;}
        #search-input { flex: 1; background: transparent; border: none; font-size: 24px; outline: none; color: #333; }
        .search-btn-center { background: var(--yellow); padding: 15px 50px; border-radius: 8px; font-size: 20px; margin-top: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; box-shadow: 0 4px 0px rgba(0,0,0,0.2); }
        .keyboard-container { width: 920px; margin-top: auto; margin-bottom: 15px; padding: 10px; }
        .kb-row { display: flex; justify-content: center; gap: 6px; margin-bottom: 8px; }
        .key { width: 65px; height: 60px; background: white; border-radius: 6px; display: flex; justify-content: center; align-items: center; font-size: 24px; color: #333; box-shadow: 0 2px 4px rgba(0,0,0,0.3); cursor: pointer; }
        .key:active { background: #eee; transform: translateY(2px); }
        .key-num { height: 50px; background: #f7f9fc; color: #1a3b8e; font-weight: bold;}
        .key-action-blue { background: #1877f2; color: white; width: 100px; font-size: 28px; }
        .key-gray { background: #d0d3d9; width: 50px; font-size: 16px;}
        .key-space { flex: 1; max-width: 400px; }
        .key-backspace { width: 80px; background: #d0d3d9; }


        /* PAGE 3: Details */
        #page-details { background: white; flex: 1; display: flex; flex-direction: column; position: relative; }
        .details-top-bar { display: flex; padding: 25px 35px 0; align-items: center; background: white; }
        .route-tab { padding: 10px 40px; border-radius: 8px; font-size: 20px; font-weight: bold; margin-right: 20px; background-color: var(--tab-gray); color: #0a1035; min-width: 140px;}
        .route-tab.active { background-color: var(--yellow); }
        .lang-switch-btn { margin-left: auto; background: var(--btn-blue); color: white; padding: 10px 25px; border-radius: 8px; font-size: 18px; }

        .details-content { display: flex; flex: 1; padding: 30px 35px 35px 35px; gap: 40px; }
        .left-panel { flex: 63; display: flex; flex-direction: column; }

        .top-info-block { display: flex; gap: 20px; margin-bottom: 40px; height: 150px; }
        
        .bus-name-box { 
            flex: 4; 
            background: var(--bg-beige); 
            border-radius: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 54px; 
            font-weight: bold; 
            color: var(--text-dark); 
        }
        
        .bus-times-col { flex: 6; display: flex; flex-direction: column; justify-content: space-between; }
        .time-row { background: var(--bg-beige); height: 47%; border-radius: 12px; display: flex; align-items: center; padding-left: 20px; font-size: 20px; color: #000; }

        .route-block { margin-bottom: 30px; }
        .labels-row { display: flex; justify-content: space-between; padding: 0 5px; margin-bottom: 8px; font-size: 22px; font-weight: bold; color: var(--btn-blue); }
        .labels-row span:last-child { width: 42%; }
        .inputs-row { display: flex; align-items: center; justify-content: space-between; }
        .location-field { width: 42%; background: var(--bg-beige); padding: 20px; border-radius: 12px; font-size: 18px; font-weight: 500; color: #000; }
        .stops-middle { text-align: center; font-weight: bold; font-size: 16px; display: flex; flex-direction: column; align-items: center; }
        .stops-underline { width: 50px; height: 2px; background: #000; margin-top: 4px; }

        .info-message { background: var(--bg-beige); padding: 20px; border-radius: 12px; font-size: 20px; margin-bottom: 20px; color: #000; }
        .details-actions { margin-top: auto; display: flex; justify-content: space-between; align-items: flex-end; }
        .btn-back-pill { background: var(--btn-blue); color: white; padding: 12px 60px; border-radius: 50px; font-size: 20px; }
        .btn-print-rect { background: var(--btn-blue); color: white; padding: 18px 70px; border-radius: 10px; font-size: 26px; }

        .right-panel { 
            flex: 37; 
            border: 2px solid var(--yellow); 
            display: flex; 
            flex-direction: column; 
            position: relative;
            height: 100%; 
        }
        
        .map-header { 
            background: var(--yellow); 
            text-align: center; 
            padding: 12px; 
            font-size: 22px; 
            font-weight: bold; 
            color: black; 
        }
        
        .map-area { 
            flex: 1; 
            position: relative; 
            background: #eee; 
            overflow: hidden; 
            cursor: pointer; 
            width: 100%; 
        }
        .map-area img { 
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; 
        }
        
        .expand-icon { position: absolute; top: 10px; left: 10px; width: 40px; height: 40px; background: var(--btn-blue); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; z-index: 5; pointer-events: none; }
        .btn-show-list { position: absolute; bottom: 20px; left: 5%; width: 90%; background: var(--btn-blue); color: white; padding: 15px; font-size: 18px; border-radius: 8px; z-index: 10; }

        /* List View */
        .list-view-container { background: white; flex: 1; padding: 20px 20px 20px 10px; overflow-y: auto; }
        .stop-item { display: flex; margin-bottom: 18px; position: relative; align-items: center; }
        .stop-time { font-weight: 500; width: 50px; text-align: right; margin-right: 15px; color: #333; font-size: 14px;}
        .stop-line { position: absolute; left: 72px; top: 20px; bottom: -25px; width: 2px; background: #5572a5; z-index: 1;}
        .stop-item:last-child .stop-line { display: none; }
        .stop-dot-small { width: 8px; height: 8px; background: var(--yellow); border-radius: 50%; position: relative; z-index: 2; left: 3px; }
        .stop-dot-large { width: 16px; height: 16px; background: var(--yellow); border-radius: 50%; position: relative; z-index: 2; left: -1px; }
        .stop-name { margin-left: 15px; font-size: 15px; color: #333; line-height: 1.2; }
        .stop-highlight { font-weight: bold; font-size: 16px; color: black; }
        .stop-end { font-weight: bold; font-size: 18px; color: var(--purple-end); }

        /* Modal & Print */
        .modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; justify-content: center; align-items: center; }
        .modal-body { width: 90%; height: 90%; background: white; position: relative; }
        .close-btn { position: absolute; top: 10px; right: 10px; background: var(--btn-blue); color: white; padding: 10px 20px; border-radius: 5px; z-index: 200; }
        .center-screen { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;}
        .loader { border: 6px solid rgba(255,255,255,0.3); border-top: 6px solid var(--yellow); border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 30px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Printing Text */
        #text-printing, #text-wait { font-size: 32px; font-weight: bold; margin: 0; }
        #text-wait { margin-top: 20px; }

    </style>
</head>
<body>

    <div id="app">
        <div class="top-banner" id="text-banner">Announcement in progress, Bus 4A is leaving in 2 minutes</div>

        <div id="page-lang">
            <div class="header-section">
                <img src="logo.png" class="logo-img" alt="Brantford Transit" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex'">
                <div class="logo-text-backup logo-container"><div class="logo-text-group"><span class="logo-small">Brantford</span><span class="logo-big">TRANSIT</span></div><span class="logo-icon">üöå</span></div>
                <div class="subtitle" id="text-lang-subtitle">Please choose your preferred language</div>
            </div>
            <div class="lang-grid" id="lang-grid">
                <button class="btn lang-btn active" id="lang-en" onclick="selectLang('en')">English</button>
                <button class="btn lang-btn" id="lang-fr" onclick="selectLang('fr')">Fran√ßais</button>
                <button class="btn lang-btn" id="lang-zh" onclick="selectLang('zh')">‰∏≠Êñá</button>
                <button class="btn lang-btn" id="lang-es" onclick="selectLang('es')">Espa√±ol</button>
                <button class="btn lang-btn" id="lang-pa" onclick="selectLang('pa')">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</button>
                <button class="btn lang-btn" id="lang-tl" onclick="selectLang('tl')">Tagalog</button>
            </div>
        </div>

        <div id="page-search" class="hidden">
            <button class="btn top-right-lang-btn" onclick="reset()">Language</button>
            <div class="header-section">
                <img src="logo.png" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex'">
                <div class="logo-text-backup logo-container"><div class="logo-text-group"><span class="logo-small">Brantford</span><span class="logo-big">TRANSIT</span></div><span class="logo-icon">üöå</span></div>
                <div class="subtitle" id="text-search-subtitle">Enter your destination to see which bus to take</div>
            </div>
            <div class="search-bar-wrapper">
                <span class="search-icon">üîç</span>
                <input type="text" id="search-input" placeholder="" autofocus>
                <span class="mic-icon">üé§</span>
            </div>
            <button class="btn search-btn-center" onclick="goToDetails()" id="btn-search">Search Route ‚ûú</button>
            <div class="keyboard-container">
                <div class="kb-row"><div class="key key-num" onclick="typeKey('1')">1</div><div class="key key-num" onclick="typeKey('2')">2</div><div class="key key-num" onclick="typeKey('3')">3</div><div class="key key-num" onclick="typeKey('4')">4</div><div class="key key-num" onclick="typeKey('5')">5</div><div class="key key-num" onclick="typeKey('6')">6</div><div class="key key-num" onclick="typeKey('7')">7</div><div class="key key-num" onclick="typeKey('8')">8</div><div class="key key-num" onclick="typeKey('9')">9</div><div class="key key-num" onclick="typeKey('0')">0</div></div>
                <div class="kb-row"><div class="key" onclick="typeKey('q')">q</div><div class="key" onclick="typeKey('w')">w</div><div class="key" onclick="typeKey('e')">e</div><div class="key" onclick="typeKey('r')">r</div><div class="key" onclick="typeKey('t')">t</div><div class="key" onclick="typeKey('y')">y</div><div class="key" onclick="typeKey('u')">u</div><div class="key" onclick="typeKey('i')">i</div><div class="key" onclick="typeKey('o')">o</div><div class="key" onclick="typeKey('p')">p</div><div class="key key-backspace" onclick="typeKey('backspace')">‚å´</div></div>
                <div class="kb-row"><div class="key" onclick="typeKey('a')">a</div><div class="key" onclick="typeKey('s')">s</div><div class="key" onclick="typeKey('d')">d</div><div class="key" onclick="typeKey('f')">f</div><div class="key" onclick="typeKey('g')">g</div><div class="key" onclick="typeKey('h')">h</div><div class="key" onclick="typeKey('j')">j</div><div class="key" onclick="typeKey('k')">k</div><div class="key" onclick="typeKey('l')">l</div><div class="key key-action-blue" onclick="goToDetails()">‚Üµ</div></div>
                <div class="kb-row"><div class="key key-gray">‚áß</div><div class="key" onclick="typeKey('z')">z</div><div class="key" onclick="typeKey('x')">x</div><div class="key" onclick="typeKey('c')">c</div><div class="key" onclick="typeKey('v')">v</div><div class="key" onclick="typeKey('b')">b</div><div class="key" onclick="typeKey('n')">n</div><div class="key" onclick="typeKey('m')">m</div><div class="key" onclick="typeKey(',')">,</div><div class="key" onclick="typeKey('.')">.</div><div class="key key-gray">‚áß</div></div>
                <div class="kb-row"><div class="key key-gray">?123</div><div class="key key-gray">üåê</div><div class="key key-space" onclick="typeKey(' ')"></div><div class="key key-gray">‚å®Ô∏è</div></div>
            </div>
        </div>

        <div id="page-details" class="hidden">
            <div class="details-top-bar">
                <button id="btn-route-1" class="btn route-tab active" onclick="switchRoute(1)">Route 1</button>
                <button id="btn-route-2" class="btn route-tab" onclick="switchRoute(2)">Route 2</button>
                <button id="btn-route-3" class="btn route-tab" onclick="switchRoute(3)">Route 3</button>
                <button class="btn lang-switch-btn" onclick="reset()">Language</button>
            </div>

            <div class="details-content">
                <div class="left-panel">
                    <div class="top-info-block">
                        <div id="bus-name-box" class="bus-name-box">Bus A</div>
                        <div class="bus-times-col">
                            <div class="time-row"><span id="lbl-duration">Trip Duration:</span> &nbsp;<b>20 min</b></div>
                            <div class="time-row"><span id="lbl-arrives">Bus Arrives:</span> &nbsp;<b>In 10min (At 15:00)</b></div>
                        </div>
                    </div>

                    <div class="route-block">
                        <div class="labels-row"><span id="lbl-from">From</span><span id="lbl-to">To</span></div>
                        <div class="inputs-row">
                            <div class="location-field">Terminal platform</div>
                            <div class="stops-middle"><div>10 Stops</div><div class="stops-underline"></div></div>
                            <div id="location-to" class="location-field">Edmondson St</div>
                        </div>
                    </div>

                    <div class="info-message"><span id="lbl-stop-after">Your Stop is after</span> - <b>Shellard Ln at Sinden Rd</b></div>
                    <div class="info-message"><span id="lbl-dest">Your Destination:</span> &nbsp;<b id="dest-text">Edmondson St</b></div>

                    <div class="details-actions">
                        <button class="btn btn-back-pill" onclick="goToSearch()" id="btn-back">Back</button>
                        <button class="btn btn-print-rect" onclick="goPrint()" id="btn-print">Print</button>
                    </div>
                </div>

                <div id="right-panel-container" class="right-panel">
                    <div id="map-header-container" class="map-header">Bus A</div>
                    <div id="view-map" class="map-area" onclick="openModal()">
                        <div class="expand-icon">‚§¢</div>
                        <img id="main-map-img" src="map_route1.jpg" alt="Map View" onerror="this.parentNode.innerHTML='<div style=\'padding:20px; text-align:center\'>‚ö†Ô∏è Image not found<br>Please check file names.</div>'">
                        <button class="btn btn-show-list" onclick="event.stopPropagation(); toggleMapList('list')" id="btn-show-list">Show Bus Line List</button>
                    </div>
                    
                    <div id="view-list" class="list-view-container hidden">
                         <div class="stop-item"><div class="stop-time">15:00</div><div class="stop-dot-large"></div><div class="stop-line"></div><div class="stop-name stop-highlight">Terminal platform</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Colborne St West at Gilkison St</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Colborne St West at Oak St</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Colborne St West at Norwich St</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Colborne St West at Sherwood Dr</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Colborne St W at Spalding Dr</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Shellard Ln at St. Patrick's Dr</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Shellard Ln at Killarney St</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Assumption College</div></div>
                         <div class="stop-item"><div class="stop-time">15:15</div><div class="stop-dot-small"></div><div class="stop-line"></div><div class="stop-name">Shellard Ln at Sinden Rd</div></div>
                         <div class="stop-item"><div class="stop-time">15:30</div><div class="stop-dot-large"></div><div class="stop-name stop-end">Edmondson St</div></div>
                         <button class="btn btn-back-pill" style="width:100%; margin-top:20px; font-size:16px; padding:10px;" onclick="toggleMapList('map')" id="btn-back-map">Back to Map</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-modal" class="modal hidden">
            <div class="modal-body">
                <button class="btn close-btn" onclick="closeModal()" id="btn-modal-back">Back</button>
                <img id="modal-map-img" src="map_route1_big.jpg" style="width:100%; height:100%; object-fit: cover;" onerror="this.alt='Image not found.'">
            </div>
        </div>
        <div id="page-print" class="center-screen hidden">
             <img src="logo.png" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex'">
             <div class="logo-text-backup logo-container" style="margin-bottom: 30px;"><div class="logo-text-group"><span class="logo-small">Brantford</span><span class="logo-big">TRANSIT</span></div><span class="logo-icon">üöå</span></div>
            <div class="loader"></div><h2 id="text-printing">Printing in Progress</h2><p id="text-wait">Please Wait</p>
        </div>
        <div id="page-success" class="center-screen hidden">
             <img src="logo.png" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex'">
             <div class="logo-text-backup logo-container" style="margin-bottom: 30px;"><div class="logo-text-group"><span class="logo-small">Brantford</span><span class="logo-big">TRANSIT</span></div><span class="logo-icon">üöå</span></div>
            <h1 style="font-size: 48px; margin-bottom: 40px;" id="text-success">Your Bus is coming!</h1>
            <button class="btn" style="background:var(--yellow); color:black; padding: 20px 60px; font-size: 24px; border-radius: 8px;" onclick="reset()" id="btn-finish">Finish</button>
        </div>
    </div>

    <script>
        // --- Ê†∏ÂøÉÈÖçÁΩÆ ---
        const translations = {
            'en': { banner: "Announcement in progress, Bus 4A is leaving in 2 minutes", langSubtitle: "Please choose your preferred language", searchSubtitle: "Enter your destination to see which bus to take", searchBtn: "Search Route ‚ûú", duration: "Trip Duration:", arrives: "Bus Arrives:", from: "From", to: "To", stopAfter: "Your Stop is after", dest: "Your Destination:", back: "Back", print: "Print", showList: "Show Bus Line List", backMap: "Back to Map", printing: "Printing in Progress", wait: "Please Wait", success: "Your Bus is coming!", finish: "Finish" },
            'zh': { banner: "ÂÖ¨ÂëäÊ≠£Âú®ËøõË°å‰∏≠Ôºå4AË∑ØÂÖ¨‰∫§ËΩ¶Â∞ÜÂú®2ÂàÜÈíüÂêéÂèëËΩ¶", langSubtitle: "ËØ∑ÈÄâÊã©ÊÇ®ÁöÑÈ¶ñÈÄâËØ≠Ë®Ä", searchSubtitle: "ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÁõÆÁöÑÂú∞‰ª•Êü•Áúã‰πòÂùêÂì™ËæÜÂÖ¨‰∫§ËΩ¶", searchBtn: "ÊêúÁ¥¢Ë∑ØÁ∫ø ‚ûú", duration: "Ë°åÁ®ãÊó∂Èó¥:", arrives: "Â∑¥Â£´Âà∞Ëææ:", from: "‰ªé", to: "Âà∞", stopAfter: "ÊÇ®ÁöÑÁ´ôÁÇπÂú®Ê≠§‰πãÂêé", dest: "ÊÇ®ÁöÑÁõÆÁöÑÂú∞:", back: "ËøîÂõû", print: "ÊâìÂç∞", showList: "ÊòæÁ§∫Á´ôÁÇπÂàóË°®", backMap: "ËøîÂõûÂú∞Âõæ", printing: "Ê≠£Âú®ÊâìÂç∞", wait: "ËØ∑Á®çÂÄô", success: "ÊÇ®ÁöÑÂ∑¥Â£´Âç≥Â∞ÜÂà∞Ëææ!", finish: "ÂÆåÊàê" },
            'fr': { banner: "Annonce en cours, le bus 4A part dans 2 minutes", langSubtitle: "Veuillez choisir votre langue pr√©f√©r√©e", searchSubtitle: "Entrez votre destination pour voir quel bus prendre", searchBtn: "Rechercher un itin√©raire ‚ûú", duration: "Dur√©e du trajet:", arrives: "Arriv√©e du bus:", from: "De", to: "√Ä", stopAfter: "Votre arr√™t est apr√®s", dest: "Votre destination:", back: "Retour", print: "Imprimer", showList: "Afficher la liste des arr√™ts", backMap: "Retour √† la carte", printing: "Impression en cours", wait: "Veuillez patienter", success: "Votre bus arrive!", finish: "Terminer" },
            'es': { banner: "Anuncio en curso, el autob√∫s 4A sale en 2 minutos", langSubtitle: "Por favor, elija su idioma preferido", searchSubtitle: "Ingrese su destino para ver qu√© autob√∫s tomar", searchBtn: "Buscar Ruta ‚ûú", duration: "Duraci√≥n del viaje:", arrives: "El autob√∫s llega:", from: "De", to: "A", stopAfter: "Su parada es despu√©s de", dest: "Su destino:", back: "Atr√°s", print: "Imprimir", showList: "Mostrar lista de paradas", backMap: "Volver al mapa", printing: "Imprimiendo en progreso", wait: "Por favor espere", success: "¬°Tu autob√∫s ya viene!", finish: "Finalizar" },
            'pa': { banner: "‡®ò‡©ã‡®∏‡®º‡®£‡®æ ‡®ú‡®æ‡®∞‡©Ä ‡®π‡©à, ‡®¨‡©±‡®∏ 4A 2 ‡®Æ‡®ø‡©∞‡®ü‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®∞‡®µ‡®æ‡®®‡®æ ‡®π‡©ã ‡®∞‡®π‡©Ä ‡®π‡©à", langSubtitle: "‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®Ü‡®™‡®£‡©Ä ‡®™‡®∏‡©∞‡®¶‡©Ä‡®¶‡®æ ‡®≠‡®æ‡®∏‡®º‡®æ ‡®ö‡©Å‡®£‡©ã", searchSubtitle: "‡®á‡®π ‡®¶‡©á‡®ñ‡®£ ‡®≤‡®à ‡®Ü‡®™‡®£‡©Ä ‡®Æ‡©∞‡®ú‡®º‡®ø‡®≤ ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã ‡®ï‡®ø ‡®ï‡®ø‡®π‡©ú‡©Ä ‡®¨‡©±‡®∏ ‡®≤‡©à‡®£‡©Ä ‡®π‡©à", searchBtn: "‡®∞‡©Ç‡®ü ‡®ñ‡©ã‡®ú‡©ã ‚ûú", duration: "‡®Ø‡®æ‡®§‡®∞‡®æ ‡®¶‡©Ä ‡®Æ‡®ø‡®Ü‡®¶:", arrives: "‡®¨‡©±‡®∏ ‡®™‡®π‡©Å‡©∞‡®ö‡®¶‡©Ä ‡®π‡©à:", from: "‡®§‡©ã‡®Ç", to: "‡®®‡©Ç‡©∞", stopAfter: "‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®∏‡®ü‡®æ‡®™ ‡®¨‡®æ‡®Ö‡®¶ ‡®µ‡®ø‡©±‡®ö ‡®π‡©à", dest: "‡®§‡©Å‡®π‡®æ‡®°‡©Ä ‡®Æ‡©∞‡®ú‡®º‡®ø‡®≤:", back: "‡®µ‡®æ‡®™‡®∏", print: "‡®™‡©ç‡®∞‡®ø‡©∞‡®ü ‡®ï‡®∞‡©ã", showList: "‡®¨‡©±‡®∏ ‡®≤‡®æ‡®à‡®® ‡®∏‡©Ç‡®ö‡©Ä ‡®¶‡®ø‡®ñ‡®æ‡®ì", backMap: "‡®®‡®ï‡®∏‡®º‡©á '‡®§‡©á ‡®µ‡®æ‡®™‡®∏ ‡®ú‡®æ‡®ì", printing: "‡®™‡©ç‡®∞‡®ø‡©∞‡®ü‡®ø‡©∞‡®ó ‡®ú‡®æ‡®∞‡©Ä ‡®π‡©à", wait: "‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®â‡®°‡©Ä‡®ï ‡®ï‡®∞‡©ã", success: "‡®§‡©Å‡®π‡®æ‡®°‡©Ä ‡®¨‡©±‡®∏ ‡®Ü ‡®∞‡®π‡©Ä ‡®π‡©à!", finish: "‡®Æ‡©Å‡®ï‡©∞‡®Æ‡®≤" },
            'tl': { banner: "Kasalukuyang anunsyo, aalis na ang Bus 4A sa loob ng 2 minuto", langSubtitle: "Mangyaring piliin ang iyong gustong wika", searchSubtitle: "Ilagay ang iyong destinasyon upang makita kung aling bus ang sasakyan", searchBtn: "Maghanap ng Ruta ‚ûú", duration: "Tagal ng Biyahe:", arrives: "Darating ang Bus:", from: "Mula sa", to: "Patungo sa", stopAfter: "Ang iyong hintuan ay pagkatapos ng", dest: "Ang iyong Destinasyon:", back: "Bumalik", print: "I-print", showList: "Ipakita ang Listahan ng Bus", backMap: "Bumalik sa Mapa", printing: "Kasalukuyang Nagpi-print", wait: "Mangyaring Maghintay", success: "Parating na ang iyong Bus!", finish: "Tapusin" }
        };

        const langCodes = ['en', 'fr', 'zh', 'es', 'pa', 'tl'];
        let langIndex = 0; 

        function fitToScreen() {
            const app = document.getElementById('app');
            const targetW = 1024; const targetH = 768;
            const scaleX = window.innerWidth / targetW;
            const scaleY = window.innerHeight / targetH;
            const scale = Math.min(scaleX, scaleY) * 0.95;
            app.style.transform = `scale(${scale})`;
        }
        window.addEventListener('resize', fitToScreen);
        window.addEventListener('load', fitToScreen);

        function applyTranslations(lang) {
            const t = translations[lang];
            const ids = { 'text-banner': t.banner, 'text-lang-subtitle': t.langSubtitle, 'text-search-subtitle': t.searchSubtitle, 'btn-search': t.searchBtn, 'lbl-duration': t.duration, 'lbl-arrives': t.arrives, 'lbl-from': t.from, 'lbl-to': t.to, 'lbl-stop-after': t.stopAfter, 'lbl-dest': t.dest, 'btn-back': t.back, 'btn-print': t.print, 'btn-show-list': t.showList, 'btn-back-map': t.backMap, 'btn-modal-back': t.back, 'text-printing': t.printing, 'text-wait': t.wait, 'text-success': t.success, 'btn-finish': t.finish };
            for(let id in ids) document.getElementById(id).innerText = ids[id];
        }

        function selectLang(lang) {
            applyTranslations(lang);
            langIndex = langCodes.indexOf(lang);
            updateLangHighlight();
            goToSearch();
        }

        function updateLangHighlight() {
            const btns = document.querySelectorAll('.lang-grid .lang-btn');
            btns.forEach((b, i) => {
                if (i === langIndex) b.classList.add('active');
                else b.classList.remove('active');
            });
        }

        function show(id) { document.querySelectorAll('#app > div[id^="page-"]').forEach(el => el.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }
        function goToSearch() { show('page-search'); document.getElementById('search-input').focus(); }
        function goToDetails() { show('page-details'); }
        function goPrint() { show('page-print'); setTimeout(() => { show('page-success'); }, 3000); }
        
        function reset() { 
            document.getElementById('search-input').value = ''; 
            switchRoute(1); 
            toggleMapList('map'); 
            applyTranslations('en');
            langIndex = 0;
            updateLangHighlight();
            show('page-lang'); 
        }
        
        function typeKey(k) { 
            const i = document.getElementById('search-input'); 
            if (k === 'backspace') i.value = i.value.slice(0, -1); 
            else if (k !== 'shift') i.value += k;
            i.focus(); 
        }

        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('page-lang').classList.contains('hidden')) {
                if (e.key === 'ArrowRight') { langIndex = (langIndex + 1) % 6; updateLangHighlight(); }
                if (e.key === 'ArrowLeft') { langIndex = (langIndex - 1 + 6) % 6; updateLangHighlight(); }
                if (e.key === 'ArrowDown') { if (langIndex + 3 < 6) langIndex += 3; updateLangHighlight(); }
                if (e.key === 'ArrowUp') { if (langIndex - 3 >= 0) langIndex -= 3; updateLangHighlight(); }
                if (e.key === 'Enter') { selectLang(langCodes[langIndex]); }
                return;
            }
            if (!document.getElementById('page-search').classList.contains('hidden')) {
                const input = document.getElementById('search-input');
                input.focus();
                if (e.key === 'Enter') goToDetails();
                return;
            }
            if (!document.getElementById('page-details').classList.contains('hidden')) {
                if (e.key === 'p' || e.key === 'P') goPrint();
                return;
            }
        });

        let currentRoute = 1;
        function switchRoute(routeNum) {
            if (currentRoute === routeNum) return; 
            currentRoute = routeNum;
            document.querySelectorAll('.route-tab').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-route-${routeNum}`).classList.add('active');

            const busName = document.getElementById('bus-name-box');
            const locTo = document.getElementById('location-to');
            const destText = document.getElementById('dest-text');
            const mapHeader = document.getElementById('map-header-container'); 
            const rightPanel = document.getElementById('right-panel-container'); 
            const mapImg = document.getElementById('main-map-img');
            const modalImg = document.getElementById('modal-map-img');

            const data = {
                1: { name: 'Bus A', dest: 'Edmondson St', color: '#fecb2f', img: 'map_route1.jpg', imgBig: 'map_route1_big.jpg' },
                2: { name: 'Bus 4C', dest: 'Lynden Park Mall', color: '#F191F0', img: 'map_route2.jpg', imgBig: 'map_route2_big.jpg' },
                3: { name: 'Bus 2', dest: 'Brantford Station', color: '#F29900', img: 'map_route3.jpg', imgBig: 'map_route3_big.jpg' }
            };

            const current = data[routeNum];
            busName.innerText = current.name;
            locTo.innerText = current.dest;
            destText.innerText = current.dest;
            mapHeader.innerText = current.name;
            mapHeader.style.backgroundColor = current.color;
            rightPanel.style.borderColor = current.color;
            mapImg.src = current.img;
            modalImg.src = current.imgBig;
            toggleMapList('map');
        }

        function toggleMapList(mode) { 
            if (mode === 'list') { document.getElementById('view-map').classList.add('hidden'); document.getElementById('view-list').classList.remove('hidden'); } 
            else { document.getElementById('view-list').classList.add('hidden'); document.getElementById('view-map').classList.remove('hidden'); }
        }
        function openModal() { document.getElementById('page-modal').classList.remove('hidden'); }
        function closeModal() { document.getElementById('page-modal').classList.add('hidden'); }
    </script>
</body>
</html>